@page "/pizzas"
@using BlazorApp.Models;
@using BlazorApp.Services;
@inject PizzaService PizzaSvc;
@inject HttpClient HttpClient;
@inject NavigationManager NavigationManager;

<h3>Pizzas</h3>

@if (pizzas == null)
{
	<p>Pizzas are loading...</p>
}
else
{
	@foreach (Pizza pizza in pizzas)
	{
		<DisplayPizza PizzaName="@pizza.Name" PizzaDescription="@pizza.Description" />
	}
}

@code {
	private List<Pizza>? pizzas = null;

	protected override async Task OnInitializedAsync()
	{
		pizzas = await HttpClient.GetFromJsonAsync<List<Pizza>>(NavigationManager.BaseUri + "pizzas");
	}
}